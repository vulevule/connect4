(this.webpackJsonpconnect4=this.webpackJsonpconnect4||[]).push([[0],{16:function(e,r,t){e.exports=t(34)},21:function(e,r,t){},32:function(e,r,t){},34:function(e,r,t){"use strict";t.r(r);var a=t(0),n=t.n(a),l=t(7),o=t.n(l),i=(t(21),t(4)),u=t.n(i),c=t(8),v=t(5),s=t(2),f=t(9),m=t(15),y=t(10),h=t(3),d=t(14),g=t(11),p=t.n(g),b=t(1),w=(t(32),t(13)),x=10,E=5,P=2,S=2,O=5,k=7,M=Number.MAX_VALUE,N=-Number.MAX_VALUE;function C(e){for(var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,t=e.length,a=0;a<t;a++)for(var n=0;n<r;n++)if(e[a][n])for(var l=1,o=[[a,n]],i=1;i<r;i++)if(e[a][n]===e[a][n+i]){if(l++,o.push([a,n+i]),l>=r)return[e[a][n],o]}else l=0,o=[[a,n]]}function T(e){for(var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,t=e.length,a=r-1;a<t;a++)for(var n=0;n<r;n++)if(e[a][n])for(var l=1,o=[[a,n]],i=1;i<r;i++)if(e[a][n]===e[a-i][n+i]){if(l++,o.push([a-i,n+i]),l>=r)return[e[a][n],o]}else l=0,o=[[a,n]]}function j(e){for(var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,t=[e[0].length,e.length],a=t[0],n=t[1],l=r-1;l<n;l++)for(var o=r-1;o<a;o++)if(e[l][o])for(var i=1,u=[[l,o]],c=1;c<r;c++)if(e[l][o]===e[l-c][o-c]){if(i++,u.push([l-c,o-c]),i>=r)return[e[l][o],u]}else i=0,u=[[l,o]]}function A(e){for(var r=[e[0].length,e.length],t=r[0],a=r[1],n=0;n<a;n++)for(var l=0;l<t;l++)if(null===e[n][l])return null;return"draw"}function B(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4;return function(e){for(var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,t=[e[0].length,e.length],a=t[0],n=t[1],l=r-1;l<n;l++)for(var o=0;o<a;o++)if(e[l][o])for(var i=1,u=[[l,o]],c=1;c<r;c++)if(e[l][o]===e[l-c][o]){if(i++,u.push([l-c,o]),i>=r)return[e[l][o],u]}else i=0,u=[[l,o]]}(e,r)||T(e,r)||j(e,r)||C(e,r)||A(e)}function I(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,t=j(e,r),a=T(e,r),n=C(e,r);return t&&t[0]||a&&a[0]||n&&n[0]}function W(e,r){for(var t=r.length-1;t>=0;t--)if(!r[t][e])return!0;return!1}function D(e){return JSON.parse(JSON.stringify(e))}var G=function e(){var r=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;Object(s.a)(this,e),this.isWinningMove=function(e){for(var t=D(r.board),a=t.length,n=r.currentPlayer,l=a-1;l>=0;l--)if(!t[l][e]){t[l][e]=n;var o=B(t);return o&&n===o[0]}},this.play=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r.board,a=r.currentPlayer,n=t.length,l=n-1;l>=0;l--)if(!t[l][e]){t[l][e]=a;break}return r.togglePlayer(),t},this.togglePlayer=function(){r.currentPlayer=-r.currentPlayer},this.board=t,this.currentPlayer=a},J=function e(r){var t=this;Object(s.a)(this,e),this.negamax=function(e){var r=t.columns,a=D(e),n=a.board,l=a.currentPlayer;if(A(n))return{value:0};console.log("Board",n,"Player",l);var o=!0,i=!1,u=void 0;try{for(var c,v=r[Symbol.iterator]();!(o=(c=v.next()).done);o=!0){var s=c.value;if(W(s,n)&&e.isWinningMove(s))return console.log("Winning "+s),{move:s,value:M}}}catch(x){i=!0,u=x}finally{try{o||null==v.return||v.return()}finally{if(i)throw u}}var f={move:null,value:N},m=!0,y=!1,h=void 0;try{for(var d,g=r[Symbol.iterator]();!(m=(d=g.next()).done);m=!0){var p=d.value;if(W(p,n)){var b=new G(n,l);b.play(p);var w=-t.negamax(b);console.log("Board",b.board,"Player",b.currentPlayer,"Score",w.value),w.value>f.value&&(f=w)}}}catch(x){y=!0,h=x}finally{try{m||null==g.return||g.return()}finally{if(y)throw h}}return f},this.negamaxAB=function(e,r,a,n){var l=t.columns,o=e.board,i=e.currentPlayer;if(A(o))return{value:0};var u=!0,c=!1,v=void 0;try{for(var s,f=l[Symbol.iterator]();!(u=(s=f.next()).done);u=!0){var m=s.value;if(W(m,o)&&e.isWinningMove(m))return{move:m,value:M}}}catch(B){c=!0,v=B}finally{try{u||null==f.return||f.return()}finally{if(c)throw v}}var y=new G(D(o),-i),h=!0,d=!1,g=void 0;try{for(var p,b=l[Symbol.iterator]();!(h=(p=b.next()).done);h=!0){var w=p.value;if(W(w,o)&&y.isWinningMove(w))return{move:w,value:M}}}catch(B){d=!0,g=B}finally{try{h||null==b.return||b.return()}finally{if(d)throw g}}if(0===n)return{value:i*t.evaluate(D(e))};var x={move:null,value:N},E=!0,P=!1,S=void 0;try{for(var O,k=l[Symbol.iterator]();!(E=(O=k.next()).done);E=!0){var C=O.value;if(W(C,o)){var T=new G(D(o),i);T.play(C);var j=t.negamaxAB(T,{move:a.move,value:-a.value},{move:r.move,value:-r.value},n-1);if(j.value=-j.value,j.move||(j.move=C),j.value>x.value&&(x=D(j)),x.value>r.value&&(r=D(x)),r.value>=a.value)return D(r)}}}catch(B){P=!0,S=B}finally{try{E||null==k.return||k.return()}finally{if(P)throw S}}return x},this.minimax=function(e,r,a,n){var l=t.columns,o=e.board,i=e.currentPlayer;console.log("Board ",o,"Player",i,"Depth ",n);var u=!0,c=!1,v=void 0;try{for(var s,f=l[Symbol.iterator]();!(u=(s=f.next()).done);u=!0){var m=s.value;if(W(m,o)&&e.isWinningMove(m))return console.log("Winning "+m),M}}catch(V){c=!0,v=V}finally{try{u||null==f.return||f.return()}finally{if(c)throw v}}var y=new G(o,-i),h=!0,d=!1,g=void 0;try{for(var p,b=l[Symbol.iterator]();!(h=(p=b.next()).done);h=!0){var w=p.value;if(W(w,o)&&y.isWinningMove(w))return console.log("Loosing "+w),M}}catch(V){d=!0,g=V}finally{try{h||null==b.return||b.return()}finally{if(d)throw g}}if(0===n){var x=t.evaluate(e);return console.log("Evaluated: "+x),x}if(-1===i){var E=N,P=!0,S=!1,O=void 0;try{for(var k,C=l[Symbol.iterator]();!(P=(k=C.next()).done);P=!0){var T=k.value;if(W(T,o)){var j=new G(o,i);j.play(T);var A=t.minimax(j,r,a,n-1);if(A>E&&(E=D(A)),E>r&&(r=D(E)),r>=a)break}}}catch(V){S=!0,O=V}finally{try{P||null==C.return||C.return()}finally{if(S)throw O}}return E}var B=M,I=!0,J=!1,L=void 0;try{for(var Y,H=l[Symbol.iterator]();!(I=(Y=H.next()).done);I=!0){var U=Y.value;if(W(U,o)){var _=new G(o,i);_.play(U);var z=t.minimax(_,r,a,n-1);if(z<B&&(B=D(z)),B<r&&(r=D(B)),r>=a)break}}}catch(V){J=!0,L=V}finally{try{I||null==H.return||H.return()}finally{if(J)throw L}}return B},this.evaluate=function(e){for(var r=e.board,t=e.currentPlayer,a=[r[0].length,r.length],n=a[0],l=a[1],o=0,i=0,u=0,c=0,v=0,s=0,f=0;f<l;f++)for(var m=0;m<n;m++)if(!r[f][m]){var y=D(r);y[f][m]=t,t===I(y,4)&&o++,t===I(y,3)&&i++,t===I(y,2)&&u++;var h=-t;y[f][m]=h,h===I(y,4)&&c++,h===I(y,3)&&v++,h===I(y,2)&&s++}return(o-c)*x+(i-v)*E+(u-s)*P},this.runMinimax=function(e,r,a){var n=t.columns,l=N,o=null,i={value:N},u={value:M},c=!0,v=!1,s=void 0;try{for(var f,m=n[Symbol.iterator]();!(c=(f=m.next()).done);c=!0){var y=f.value;if(W(y,e)){var h=new G(e,r);h.play(y);var d=t.minimax(h,i,u,a);l<d&&(l=D(d),o=y)}}}catch(g){v=!0,s=g}finally{try{c||null==m.return||m.return()}finally{if(v)throw s}}return{move:o,value:l}},this.solve=function(e,r,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,l=new G(e,r);return 1===n?t.negamaxAB(l,{value:N},{value:M},a):2===n?t.negamax(l):t.runMinimax(e,r,a)};var a=Object(w.a)(Array(r).keys());a.sort((function(e,r){return Math.abs(a.indexOf(e)-a.length/2)-Math.abs(a.indexOf(r)-a.length/2)})),this.columns=a},L=function(e){function r(e){var t;return Object(s.a)(this,r),(t=Object(m.a)(this,Object(y.a)(r).call(this,e))).handleDepthChange=function(e){t.setState({depth:e.target.value})},t.initBoard=function(){for(var e=t.state,r=e.width,a=e.heigth,n=e.player1,l=e.player2,o=[],i=0;i<a;i++)o.push(new Array(r).fill(null));var u=[n,l][Math.round(Math.random())];t.setState({board:o,connected:[],currentPlayer:u,gameOver:!1,message:""}),u===l&&setTimeout((function(){var e=t.play(Math.floor(r/2)-Math.round(Math.random()),u),a=Object(v.a)(e,2),n=a[0],l=a[1];t.setState({board:n,currentPlayer:l})}),500)},t.togglePlayer=function(){return t.state.currentPlayer===t.state.player1?t.state.player2:t.state.player1},t.computeScores=function(e,r){if(r===t.state.player2){var a=t.state,n=a.depth,l=a.width;return new J(l).solve(D(e),r,n)}},t.playHuman=function(){var e=Object(c.a)(u.a.mark((function e(r){var a,n,l,o,i,c,s,f;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.state,n=a.gameOver,l=a.currentPlayer,o=a.player2,!n){e.next=4;break}return b.ToastsStore.warning("Game over! Please start a new game."),e.abrupt("return");case 4:if(l!==o){e.next=7;break}return b.ToastsStore.warning("I'm thinking. Be patient!"),e.abrupt("return");case 7:if(i=t.play(r),c=Object(v.a)(i,2),s=c[0],f=c[1],s||f){e.next=10;break}return e.abrupt("return");case 10:return e.next=12,t.setState({board:s,currentPlayer:f});case 12:setTimeout((function(){t.playAI(s,f)}),500);case 13:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),t.playAI=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.state.board,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.state.currentPlayer,a=t.state,n=a.gameOver,l=a.player1;if(!n&&r!==l){var o=t.computeScores(D(e),r);t.play(o.move)}},t.play=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.state.currentPlayer,a=t.state,n=a.board,l=a.heigth,o=a.player1,i=a.player2,u=-r;if(!W(e,n))return b.ToastsStore.warning("That column is full my friend."),[null,null];for(var c=l-1;c>=0;c--)if(!n[c][e]){n[c][e]=r;break}var v=B(n);if(v&&v[0]===o)t.setState({board:n,connected:v[1],gameOver:!0,currentPlayer:null}),b.ToastsStore.success("You won!");else if(v&&v[0]===i)t.setState({board:n,connected:v[1],gameOver:!0,currentPlayer:null}),b.ToastsStore.error("You lost!");else{if("draw"!==v)return t.setState({board:n,currentPlayer:u}),[n,u];t.setState({board:n,gameOver:!0,currentPlayer:null}),b.ToastsStore.warning("Draw game.")}return[null,null]},t.render=function(){var e=t.state,r=e.board,a=e.message,l=e.gameOver,o=e.depth,i=e.currentPlayer,u=e.player1,c=e.player2,v=e.connected;return n.a.createElement("div",null,n.a.createElement("p",{className:"message"},"Game complexity:"," ",n.a.createElement("input",{value:S,onChange:t.handleDepthChange,checked:o<O,name:"depth",type:"radio"}),n.a.createElement("label",null," Easy "),n.a.createElement("input",{value:O,onChange:t.handleDepthChange,name:"depth",type:"radio"}),n.a.createElement("label",null," Medium "),n.a.createElement("input",{value:k,onChange:t.handleDepthChange,name:"depth",type:"radio"}),n.a.createElement("label",null," Hard ")),n.a.createElement("p",{className:"note"},n.a.createElement("b",null,"*Note:")," Greater complexity requires more time to calculate AI's best move."),n.a.createElement("p",{className:"note"},"First player will be randomly selected. You are the red player."),n.a.createElement("div",{className:"button",onClick:function(){t.initBoard()}},"New Game"),n.a.createElement("div",{className:"tableContainer"},n.a.createElement(p.a,{css:"position: absolute;",sizeUnit:"px",size:150,color:"#123abc",loading:i===c}),n.a.createElement("table",{className:i===c?"tableLoading":"table"},n.a.createElement("thead",null),n.a.createElement("tbody",null,r.map((function(e,r){return n.a.createElement(Y,{key:r,rowIndex:r,row:e,play:t.playHuman,tokens:v,gameOver:l})}))))),n.a.createElement("p",{className:"message"},l?"":i===u?"You play now":"I'm thinking..."),n.a.createElement("p",{className:"message"},a),n.a.createElement(b.ToastsContainer,{store:b.ToastsStore,position:b.ToastsContainerPosition.TOP_CENTER}))},t.state={width:6,heigth:6,player1:1,player2:-1,currentPlayer:null,board:[],connected:[],gameOver:!1,message:"",depth:2},t.play=t.play.bind(Object(h.a)(t)),t}return Object(d.a)(r,e),Object(f.a)(r,[{key:"componentDidMount",value:function(){this.initBoard()}}]),r}(a.Component),Y=function(e){var r=e.rowIndex,t=e.row,a=e.play,l=e.tokens,o=e.gameOver;return n.a.createElement("tr",null,t.map((function(e,t){return n.a.createElement(H,{key:t,value:e,columnIndex:t,play:a,connected:l.some((function(e){return[r,t].every((function(r,t){return r===e[t]}))})),gameOver:o})})))},H=function(e){var r=e.value,t=e.columnIndex,a=e.play,l=e.connected,o=e.gameOver,i="white";return 1===r?i="red":-1===r&&(i="yellow"),n.a.createElement("td",null,n.a.createElement("div",{className:"cell ".concat(o?l?"connected":"notConnected":""),onClick:function(){a(t)}},n.a.createElement("div",{className:i})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(n.a.createElement(L,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[16,1,2]]]);
//# sourceMappingURL=main.6b94d69c.chunk.js.map